{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import ProductSegment from'./ProductSegment';import{getWorkById,getProductById,getWorkProducts,updateWorkStepStatus}from'./worksapi';import\"./QualityControl.css\";import\"./WorkDetails.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var QualityControl=function QualityControl(){var location=useLocation();var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),work=_useState2[0],setWork=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),products=_useState4[0],setProducts=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),activeProductIndex=_useState6[0],setActiveProductIndex=_useState6[1];var searchParams=new URLSearchParams(location.search);var work_id=searchParams.get('work_id');var step_id=searchParams.get('step_id');useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var workData,productsData,fetchedProducts;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getWorkById(work_id);case 2:workData=_context2.sent;setWork(workData);_context2.next=6;return getWorkProducts(work_id);case 6:productsData=_context2.sent;if(!productsData){_context2.next=12;break;}_context2.next=10;return Promise.all(productsData.data.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(productData){var product;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getProductById(productData.product_id);case 2:product=_context.sent;return _context.abrupt(\"return\",product.data);case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()));case 10:fetchedProducts=_context2.sent;setProducts(fetchedProducts);case 12:case\"end\":return _context2.stop();}},_callee2);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[work_id]);var handleComplete=function handleComplete(){// Save işlemini gerçekleştirebilirsiniz\n};var handleProductClick=function handleProductClick(index){setActiveProductIndex(index);};var renderProductContent=function renderProductContent(){if(!products.length)return null;var activeProduct=products[activeProductIndex];return/*#__PURE__*/_jsx(ProductSegment,{product:activeProduct,vendorId:work.data.vendor_id,work_id:work_id},activeProduct.id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-page-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"qc-heading\",children:\"Quality Control\"}),work&&/*#__PURE__*/_jsx(\"div\",{className:\"work-details\",children:/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Work Details\"})}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"Order Number: \",work.data.order_number]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Inspector: \",work.data.inspector_id]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"Project Number: \",work.data.project_number]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Foreman: \",work.data.foreman_id]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"Vendor: \",work.data.vendor_id]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Work Type: \",work.data.work_type]})]}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{children:[\"Customer: \",work.data.customer_id]})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{children:[\"Status: \",work.data.status]})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-segments\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"work-detail-row\"}),products.map(function(product,index){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleProductClick(index);},className:activeProductIndex===index?'active':'',children:product.name},product.id);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-content\",children:renderProductContent()}),/*#__PURE__*/_jsx(\"button\",{onClick:handleComplete,className:\"qc-btn qc-btn-primary\",children:\"Complete\"})]});};export default QualityControl;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","ProductSegment","getWorkById","getProductById","getWorkProducts","updateWorkStepStatus","jsx","_jsx","jsxs","_jsxs","QualityControl","location","navigate","_useState","_useState2","_slicedToArray","work","setWork","_useState3","_useState4","products","setProducts","_useState5","_useState6","activeProductIndex","setActiveProductIndex","searchParams","URLSearchParams","search","work_id","get","step_id","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","workData","productsData","fetchedProducts","wrap","_callee2$","_context2","prev","next","sent","Promise","all","data","map","_ref2","_callee","productData","product","_callee$","_context","product_id","abrupt","stop","_x","apply","arguments","handleComplete","handleProductClick","index","renderProductContent","length","activeProduct","vendorId","vendor_id","id","className","children","order_number","inspector_id","project_number","foreman_id","work_type","customer_id","status","onClick","name"],"sources":["C:/Users/AlperenAlihanEr/portal-test/client/src/components/Works/QualityControl.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport ProductSegment from './ProductSegment';\r\nimport {\r\n  getWorkById,\r\n  getProductById,\r\n  getWorkProducts,\r\n  updateWorkStepStatus,\r\n} from './worksapi';\r\nimport \"./QualityControl.css\"\r\nimport \"./WorkDetails.css\"\r\n\r\nconst QualityControl = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [work, setWork] = useState(null);\r\n  const [products, setProducts] = useState([]);\r\n  const [activeProductIndex, setActiveProductIndex] = useState(0);\r\n  const searchParams = new URLSearchParams(location.search);\r\n  const work_id = searchParams.get('work_id');\r\n  const step_id = searchParams.get('step_id');\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const workData = await getWorkById(work_id);\r\n      setWork(workData);\r\n\r\n      const productsData = await getWorkProducts(work_id);\r\n\r\n      if (productsData) {\r\n        const fetchedProducts = await Promise.all(\r\n          productsData.data.map(async (productData) => {\r\n            const product = await getProductById(productData.product_id);\r\n            return product.data;\r\n          })\r\n        );\r\n        setProducts(fetchedProducts);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [work_id]);\r\n\r\n  const handleComplete = () => {\r\n    // Save işlemini gerçekleştirebilirsiniz\r\n  };\r\n\r\n  const handleProductClick = (index) => {\r\n    setActiveProductIndex(index);\r\n  };\r\n\r\n  const renderProductContent = () => {\r\n    if (!products.length) return null;\r\n    const activeProduct = products[activeProductIndex];\r\n    return (\r\n      <ProductSegment key={activeProduct.id} product={activeProduct} vendorId={work.data.vendor_id} work_id={work_id}/>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-page-container\">\r\n      <h2 className=\"qc-heading\">Quality Control</h2>\r\n      {work && (\r\n        <div className=\"work-details\">\r\n          <table>\r\n              <tbody>\r\n                  <tr>\r\n                    <h3>Work Details</h3>\r\n                  </tr>\r\n                  <tr>\r\n                      <td>Order Number: {work.data.order_number}</td>\r\n                      <td>Inspector: {work.data.inspector_id}</td>\r\n                  </tr>\r\n                  <tr>\r\n                      <td>Project Number: {work.data.project_number}</td>\r\n                      <td>Foreman: {work.data.foreman_id}</td>\r\n                  </tr>\r\n                  <tr>\r\n                      <td>Vendor: {work.data.vendor_id}</td>\r\n                      <td>Work Type: {work.data.work_type}</td>\r\n                  </tr>\r\n                  <tr>\r\n                      <td>Customer: {work.data.customer_id}</td>\r\n                  </tr>\r\n                  <tr>\r\n                      <td>Status: {work.data.status}</td>\r\n                  </tr>\r\n              </tbody>\r\n          </table>\r\n      </div>\r\n      )}\r\n      <div className=\"product-segments\">\r\n        <div className=\"work-detail-row\">\r\n        </div>\r\n        {products.map((product, index) => (\r\n          <button\r\n            key={product.id}\r\n            onClick={() => handleProductClick(index)}\r\n            className={activeProductIndex === index ? 'active' : ''}\r\n          >\r\n            {product.name}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      <div className=\"product-content\">{renderProductContent()}</div>\r\n      <button onClick={handleComplete} className=\"qc-btn qc-btn-primary\">\r\n        Complete\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QualityControl;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}