{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./Inspection.css';import{getAllInspectionPlans,getAllUsers,getUserRole,getDescriptionControl}from'./inspectionapi';import{fetchItems}from'./inspection_utils';import InspectionUI from'./InspectionUI';import{jsx as _jsx}from\"react/jsx-runtime\";var Inspection=function Inspection(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),inspectionPlans=_useState2[0],setInspectionPlans=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),currentUserRole=_useState6[0],setCurrentUserRole=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),currentUserId=_useState8[0],setCurrentUserId=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),updateTrigger=_useState10[0],setUpdateTrigger=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),descriptionControls=_useState12[0],setDescriptionControls=_useState12[1];useEffect(function(){fetchItems(getAllInspectionPlans,/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var descriptionData,descriptionControls,_iterator,_step,desc;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:data.sort(function(a,b){return a.order_number.localeCompare(b.order_number);});_context.next=3;return getDescriptionControl();case 3:descriptionData=_context.sent;descriptionControls={};_iterator=_createForOfIteratorHelper(descriptionData.data);try{for(_iterator.s();!(_step=_iterator.n()).done;){desc=_step.value;descriptionControls[desc.inspectionplan_id]=desc.description;}}catch(err){_iterator.e(err);}finally{_iterator.f();}setDescriptionControls(descriptionControls);setInspectionPlans(data);case 9:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());fetchItems(getAllUsers,setUsers);var userRole=getUserRole();setCurrentUserRole(userRole.role);setCurrentUserId(userRole.user_id);},[updateTrigger]);return/*#__PURE__*/_jsx(InspectionUI,{inspectionPlans:inspectionPlans,setInspectionPlans:setInspectionPlans,users:users,currentUserRole:currentUserRole,currentUserId:currentUserId,updateTrigger:updateTrigger,setUpdateTrigger:setUpdateTrigger,descriptionControls:descriptionControls,setDescriptionControls:setDescriptionControls});};export default Inspection;","map":{"version":3,"names":["React","useState","useEffect","getAllInspectionPlans","getAllUsers","getUserRole","getDescriptionControl","fetchItems","InspectionUI","jsx","_jsx","Inspection","_useState","_useState2","_slicedToArray","inspectionPlans","setInspectionPlans","_useState3","_useState4","users","setUsers","_useState5","_useState6","currentUserRole","setCurrentUserRole","_useState7","_useState8","currentUserId","setCurrentUserId","_useState9","_useState10","updateTrigger","setUpdateTrigger","_useState11","_useState12","descriptionControls","setDescriptionControls","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","descriptionData","_iterator","_step","desc","wrap","_callee$","_context","prev","next","sort","a","b","order_number","localeCompare","sent","_createForOfIteratorHelper","s","n","done","value","inspectionplan_id","description","err","e","f","stop","_x","apply","arguments","userRole","role","user_id"],"sources":["C:/Users/AlperenAlihanEr/portal-test/client/src/components/InspectionPlan/Inspection.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Inspection.css';\r\nimport {\r\n  getAllInspectionPlans,\r\n  getAllUsers,\r\n  getUserRole,\r\n  getDescriptionControl \r\n} from './inspectionapi';\r\n\r\nimport {\r\n  fetchItems,\r\n} from './inspection_utils';\r\n\r\nimport InspectionUI from './InspectionUI';\r\n\r\nconst Inspection = () => {\r\n  const [inspectionPlans, setInspectionPlans] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [currentUserRole, setCurrentUserRole] = useState('');\r\n  const [currentUserId, setCurrentUserId] = useState('');\r\n  const [updateTrigger, setUpdateTrigger] = useState(false);\r\n  const [descriptionControls, setDescriptionControls] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetchItems(getAllInspectionPlans, async (data) => {\r\n      data.sort((a, b) => a.order_number.localeCompare(b.order_number));\r\n\r\n      const descriptionData = await getDescriptionControl();\r\n      const descriptionControls = {};\r\n      for (let desc of descriptionData.data) {\r\n        descriptionControls[desc.inspectionplan_id] = desc.description;\r\n      }\r\n      \r\n      setDescriptionControls(descriptionControls); \r\n      setInspectionPlans(data);\r\n    });\r\n    \r\n    fetchItems(getAllUsers, setUsers);\r\n\r\n    const userRole = getUserRole();\r\n    setCurrentUserRole(userRole.role);\r\n    setCurrentUserId(userRole.user_id);\r\n\r\n  }, [updateTrigger]);\r\n  \r\n  return (\r\n    <InspectionUI \r\n      inspectionPlans={inspectionPlans} \r\n      setInspectionPlans={setInspectionPlans}\r\n      users={users} \r\n      currentUserRole={currentUserRole} \r\n      currentUserId={currentUserId} \r\n      updateTrigger={updateTrigger} \r\n      setUpdateTrigger={setUpdateTrigger} \r\n      descriptionControls={descriptionControls} \r\n      setDescriptionControls={setDescriptionControls}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Inspection;\r\n"],"mappings":"4iBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,kBAAkB,CACzB,OACEC,qBAAqB,CACrBC,WAAW,CACXC,WAAW,CACXC,qBAAqB,KAChB,iBAAiB,CAExB,OACEC,UAAU,KACL,oBAAoB,CAE3B,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1C,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvB,IAAAC,SAAA,CAA8CX,QAAQ,CAAC,EAAE,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnDG,eAAe,CAAAF,UAAA,IAAEG,kBAAkB,CAAAH,UAAA,IAC1C,IAAAI,UAAA,CAA0BhB,QAAQ,CAAC,EAAE,CAAC,CAAAiB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAA8CpB,QAAQ,CAAC,EAAE,CAAC,CAAAqB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnDE,eAAe,CAAAD,UAAA,IAAEE,kBAAkB,CAAAF,UAAA,IAC1C,IAAAG,UAAA,CAA0CxB,QAAQ,CAAC,EAAE,CAAC,CAAAyB,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA/CE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IACtC,IAAAG,UAAA,CAA0C5B,QAAQ,CAAC,KAAK,CAAC,CAAA6B,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAAlDE,aAAa,CAAAD,WAAA,IAAEE,gBAAgB,CAAAF,WAAA,IACtC,IAAAG,WAAA,CAAsDhC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAiC,WAAA,CAAApB,cAAA,CAAAmB,WAAA,IAA3DE,mBAAmB,CAAAD,WAAA,IAAEE,sBAAsB,CAAAF,WAAA,IAElDhC,SAAS,CAAC,UAAM,CACdK,UAAU,CAACJ,qBAAqB,6BAAAkC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAC,QAAOC,IAAI,MAAAC,eAAA,CAAAR,mBAAA,CAAAS,SAAA,CAAAC,KAAA,CAAAC,IAAA,QAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC3CT,IAAI,CAACU,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,QAAK,CAAAD,CAAC,CAACE,YAAY,CAACC,aAAa,CAACF,CAAC,CAACC,YAAY,CAAC,GAAC,CAACN,QAAA,CAAAE,IAAA,SAEpC,CAAA7C,qBAAqB,EAAE,QAA/CqC,eAAe,CAAAM,QAAA,CAAAQ,IAAA,CACftB,mBAAmB,CAAG,CAAC,CAAC,CAAAS,SAAA,CAAAc,0BAAA,CACbf,eAAe,CAACD,IAAI,MAArC,IAAAE,SAAA,CAAAe,CAAA,KAAAd,KAAA,CAAAD,SAAA,CAAAgB,CAAA,IAAAC,IAAA,EAAuC,CAA9Bf,IAAI,CAAAD,KAAA,CAAAiB,KAAA,CACX3B,mBAAmB,CAACW,IAAI,CAACiB,iBAAiB,CAAC,CAAGjB,IAAI,CAACkB,WAAW,CAChE,CAAC,OAAAC,GAAA,EAAArB,SAAA,CAAAsB,CAAA,CAAAD,GAAA,WAAArB,SAAA,CAAAuB,CAAA,IAED/B,sBAAsB,CAACD,mBAAmB,CAAC,CAC3CnB,kBAAkB,CAAC0B,IAAI,CAAC,CAAC,wBAAAO,QAAA,CAAAmB,IAAA,MAAA3B,OAAA,GAC1B,mBAAA4B,EAAA,SAAAhC,IAAA,CAAAiC,KAAA,MAAAC,SAAA,QAAC,CAEFhE,UAAU,CAACH,WAAW,CAAEgB,QAAQ,CAAC,CAEjC,GAAM,CAAAoD,QAAQ,CAAGnE,WAAW,EAAE,CAC9BmB,kBAAkB,CAACgD,QAAQ,CAACC,IAAI,CAAC,CACjC7C,gBAAgB,CAAC4C,QAAQ,CAACE,OAAO,CAAC,CAEpC,CAAC,CAAE,CAAC3C,aAAa,CAAC,CAAC,CAEnB,mBACErB,IAAA,CAACF,YAAY,EACXO,eAAe,CAAEA,eAAgB,CACjCC,kBAAkB,CAAEA,kBAAmB,CACvCG,KAAK,CAAEA,KAAM,CACbI,eAAe,CAAEA,eAAgB,CACjCI,aAAa,CAAEA,aAAc,CAC7BI,aAAa,CAAEA,aAAc,CAC7BC,gBAAgB,CAAEA,gBAAiB,CACnCG,mBAAmB,CAAEA,mBAAoB,CACzCC,sBAAsB,CAAEA,sBAAuB,EAC/C,CAEN,CAAC,CAED,cAAe,CAAAzB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}