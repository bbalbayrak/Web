{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/mtrce/portal-test/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/mtrce/portal-test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import jwt_decode from'jwt-decode';var API_URL='https://portal-test.yenaengineering.nl/api';export var getAllInspectionPlans=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(API_URL,\"/inspectionplans\"));case 3:response=_context.sent;return _context.abrupt(\"return\",response.data.inspectionPlans);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);throw _context.t0;case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function getAllInspectionPlans(){return _ref.apply(this,arguments);};}();export var getAllUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(API_URL,\"/allusers\"));case 3:response=_context2.sent;return _context2.abrupt(\"return\",response.data.data);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);throw _context2.t0;case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function getAllUsers(){return _ref2.apply(this,arguments);};}();export var updateInspectionPlan=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(plan){var data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:data={control_type:plan.control_type,control_responsible:plan.control_responsible,control_date:plan.control_date,status:'waiting'};_context3.next=3;return axios.put(\"\".concat(API_URL,\"/inspectionplans/\").concat(plan.id),data);case 3:case\"end\":return _context3.stop();}},_callee3);}));return function updateInspectionPlan(_x){return _ref3.apply(this,arguments);};}();export var deleteInspectionPlan=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.delete(\"\".concat(API_URL,\"/inspectionplans/\").concat(id));case 2:case\"end\":return _context4.stop();}},_callee4);}));return function deleteInspectionPlan(_x2){return _ref4.apply(this,arguments);};}();export var getUserRole=function getUserRole(){var token=localStorage.getItem('token');if(!token)return null;var decodedToken=jwt_decode(token);console.log(decodedToken);return decodedToken.role;// Rol bilgisinin anahtarının \"role\" olduğunu varsayıyoruz. Token yapınıza bağlı olarak bu değişebilir.\n};","map":{"version":3,"names":["axios","jwt_decode","API_URL","getAllInspectionPlans","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","abrupt","data","inspectionPlans","t0","stop","apply","arguments","getAllUsers","_ref2","_callee2","_callee2$","_context2","updateInspectionPlan","_ref3","_callee3","plan","_callee3$","_context3","control_type","control_responsible","control_date","status","put","id","_x","deleteInspectionPlan","_ref4","_callee4","_callee4$","_context4","delete","_x2","getUserRole","token","localStorage","getItem","decodedToken","console","log","role"],"sources":["C:/Users/mtrce/portal-test/client/src/components/InspectionPlan/inspectionapi.js"],"sourcesContent":["import axios from 'axios';\r\nimport jwt_decode from 'jwt-decode';\r\n\r\nconst API_URL = 'https://portal-test.yenaengineering.nl/api';\r\n\r\nexport const getAllInspectionPlans = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/inspectionplans`);\r\n    return response.data.inspectionPlans; // Update this line\r\n  } catch (error) {\r\n    // console.error('Error fetching forms:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getAllUsers = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/allusers`);\r\n    return response.data.data; // Update this line\r\n  } catch (error) {\r\n    // console.error('Error fetching forms:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateInspectionPlan = async plan => {\r\n  const data = {\r\n    control_type: plan.control_type,\r\n    control_responsible: plan.control_responsible,\r\n    control_date: plan.control_date,\r\n    status: 'waiting',\r\n  };\r\n  await axios.put(`${API_URL}/inspectionplans/${plan.id}`, data);\r\n};\r\n\r\nexport const deleteInspectionPlan = async id => {\r\n  await axios.delete(`${API_URL}/inspectionplans/${id}`);\r\n};\r\n\r\nexport const getUserRole = () => {\r\n  const token = localStorage.getItem('token');\r\n  if (!token) return null;\r\n\r\n  const decodedToken = jwt_decode(token);\r\n  console.log(decodedToken);\r\n  return decodedToken.role; // Rol bilgisinin anahtarının \"role\" olduğunu varsayıyoruz. Token yapınıza bağlı olarak bu değişebilir.\r\n};\r\n"],"mappings":"8PAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,UAAU,KAAM,YAAY,CAEnC,GAAM,CAAAC,OAAO,CAAG,4CAA4C,CAE5D,MAAO,IAAM,CAAAC,qBAAqB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEV,CAAAd,KAAK,CAACe,GAAG,IAAAC,MAAA,CAAId,OAAO,qBAAmB,QAAxDO,QAAQ,CAAAG,QAAA,CAAAK,IAAA,QAAAL,QAAA,CAAAM,MAAA,UACPT,QAAQ,CAACU,IAAI,CAACC,eAAe,SAAAR,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAS,EAAA,CAAAT,QAAA,mBAAAA,QAAA,CAAAS,EAAA,0BAAAT,QAAA,CAAAU,IAAA,MAAAd,OAAA,gBAKvC,kBARY,CAAAL,qBAAqBA,CAAA,SAAAC,IAAA,CAAAmB,KAAA,MAAAC,SAAA,OAQjC,CAED,MAAO,IAAM,CAAAC,WAAW,6BAAAC,KAAA,CAAArB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAoB,SAAA,MAAAlB,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAkB,UAAAC,SAAA,iBAAAA,SAAA,CAAAhB,IAAA,CAAAgB,SAAA,CAAAf,IAAA,SAAAe,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAf,IAAA,SAEA,CAAAd,KAAK,CAACe,GAAG,IAAAC,MAAA,CAAId,OAAO,cAAY,QAAjDO,QAAQ,CAAAoB,SAAA,CAAAZ,IAAA,QAAAY,SAAA,CAAAX,MAAA,UACPT,QAAQ,CAACU,IAAI,CAACA,IAAI,SAAAU,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAR,EAAA,CAAAQ,SAAA,mBAAAA,SAAA,CAAAR,EAAA,0BAAAQ,SAAA,CAAAP,IAAA,MAAAK,QAAA,gBAK5B,kBARY,CAAAF,WAAWA,CAAA,SAAAC,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAQvB,CAED,MAAO,IAAM,CAAAM,oBAAoB,6BAAAC,KAAA,CAAA1B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAyB,SAAMC,IAAI,MAAAd,IAAA,QAAAb,mBAAA,GAAAI,IAAA,UAAAwB,UAAAC,SAAA,iBAAAA,SAAA,CAAAtB,IAAA,CAAAsB,SAAA,CAAArB,IAAA,SACtCK,IAAI,CAAG,CACXiB,YAAY,CAAEH,IAAI,CAACG,YAAY,CAC/BC,mBAAmB,CAAEJ,IAAI,CAACI,mBAAmB,CAC7CC,YAAY,CAAEL,IAAI,CAACK,YAAY,CAC/BC,MAAM,CAAE,SACV,CAAC,CAAAJ,SAAA,CAAArB,IAAA,SACK,CAAAd,KAAK,CAACwC,GAAG,IAAAxB,MAAA,CAAId,OAAO,sBAAAc,MAAA,CAAoBiB,IAAI,CAACQ,EAAE,EAAItB,IAAI,CAAC,yBAAAgB,SAAA,CAAAb,IAAA,MAAAU,QAAA,GAC/D,kBARY,CAAAF,oBAAoBA,CAAAY,EAAA,SAAAX,KAAA,CAAAR,KAAA,MAAAC,SAAA,OAQhC,CAED,MAAO,IAAM,CAAAmB,oBAAoB,6BAAAC,KAAA,CAAAvC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAsC,SAAMJ,EAAE,SAAAnC,mBAAA,GAAAI,IAAA,UAAAoC,UAAAC,SAAA,iBAAAA,SAAA,CAAAlC,IAAA,CAAAkC,SAAA,CAAAjC,IAAA,SAAAiC,SAAA,CAAAjC,IAAA,SACpC,CAAAd,KAAK,CAACgD,MAAM,IAAAhC,MAAA,CAAId,OAAO,sBAAAc,MAAA,CAAoByB,EAAE,EAAG,yBAAAM,SAAA,CAAAzB,IAAA,MAAAuB,QAAA,GACvD,kBAFY,CAAAF,oBAAoBA,CAAAM,GAAA,SAAAL,KAAA,CAAArB,KAAA,MAAAC,SAAA,OAEhC,CAED,MAAO,IAAM,CAAA0B,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CAC/B,GAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,MAAO,KAAI,CAEvB,GAAM,CAAAG,YAAY,CAAGrD,UAAU,CAACkD,KAAK,CAAC,CACtCI,OAAO,CAACC,GAAG,CAACF,YAAY,CAAC,CACzB,MAAO,CAAAA,YAAY,CAACG,IAAI,CAAE;AAC5B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}