{"ast":null,"code":"import _defineProperty from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createOrUpdateForm}from'./formapi';import{segments}from'./renderSegmentContent';export var initialFormState={product_id:null,vendor_id:null,steps:segments.map(function(segment,index){return{name:segment.name,order:segment.order,substeps:[]};})};export var fetchItems=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(getter,setter){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getter();case 3:response=_context.sent;setter(response.data);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchItems(_x,_x2){return _ref.apply(this,arguments);};}();export var handleFormChange=function handleFormChange(form,setForm){return function(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};};export var handleDragOver=function handleDragOver(e){e.preventDefault();};export var saveForm=function saveForm(form,rows,segmentIndex){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var postData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log(\"rows:\",rows);console.log(\"segmentIndex\",segmentIndex);postData=_objectSpread(_objectSpread({},form.id&&{id:form.id}),{},{id:form.id,product_id:form.product_id,vendor_id:form.vendor_id,steps:segments.map(function(segment,index){return{name:segment.name,order:segment.order,substeps:index===segmentIndex?rows.map(function(row){return mapRowToSubstep(row);}):[]};})});_context2.prev=3;console.log(\"postData:\",postData);_context2.next=7;return createOrUpdateForm(postData);case 7:_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](3);throw new Error(\"Error saving form: \".concat(_context2.t0));case 12:case\"end\":return _context2.stop();}},_callee2,null,[[3,9]]);}));};var mapRowToSubstep=function mapRowToSubstep(row){var id=row.id,technical_drawing_numbering=row.technical_drawing_numbering,tools=row.tools,description=row.description,actual_dimension=row.actual_dimension,lower_tolerance=row.lower_tolerance,upper_tolerance=row.upper_tolerance,sample_quantity=row.sample_quantity,example_visual_url=row.example_visual_url,row_number=row.row_number;return _objectSpread(_objectSpread({},id&&{id:id}),{},{technical_drawing_numbering:technical_drawing_numbering,tools:tools,description:description,actual_dimension:actual_dimension,lower_tolerance:lower_tolerance,upper_tolerance:upper_tolerance,sample_quantity:sample_quantity,example_visual_url:example_visual_url,row_number:row_number});};","map":{"version":3,"names":["createOrUpdateForm","segments","initialFormState","product_id","vendor_id","steps","map","segment","index","name","order","substeps","fetchItems","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","getter","setter","response","wrap","_callee$","_context","prev","next","sent","data","t0","stop","_x","_x2","apply","arguments","handleFormChange","form","setForm","e","_objectSpread","_defineProperty","target","value","handleDragOver","preventDefault","saveForm","rows","segmentIndex","_callee2","postData","_callee2$","_context2","console","log","id","row","mapRowToSubstep","Error","concat","technical_drawing_numbering","tools","description","actual_dimension","lower_tolerance","upper_tolerance","sample_quantity","example_visual_url","row_number"],"sources":["C:/Users/AlperenAlihanEr/portal-test/client/src/components/PQC/pqc_utils.js"],"sourcesContent":["import { createOrUpdateForm } from './formapi';\r\nimport { segments } from './renderSegmentContent';\r\n\r\nexport const initialFormState = {\r\n    product_id: null,\r\n    vendor_id: null,\r\n    steps: segments.map((segment, index) => ({\r\n      name: segment.name,\r\n      order: segment.order,\r\n      substeps: [],\r\n    })),\r\n  };\r\n  \r\n  export const fetchItems = async (getter, setter) => {\r\n    try {\r\n      const response = await getter();\r\n      setter(response.data);\r\n    } catch (error) {\r\n      // console.error(`Error fetching items: ${error}`);\r\n    }\r\n  };\r\n  \r\n  export const handleFormChange = (form, setForm) => e => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n  \r\n  export const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n  };\r\n  \r\n  export const saveForm = (form, rows, segmentIndex) => async () => {\r\n    console.log(\"rows:\",rows);\r\n    console.log(\"segmentIndex\", segmentIndex)\r\n    const postData = {\r\n      ...(form.id && { id: form.id }),\r\n      id: form.id,\r\n      product_id: form.product_id,\r\n      vendor_id: form.vendor_id,\r\n      steps: segments.map((segment, index) => ({\r\n        name: segment.name,\r\n        order: segment.order,\r\n        substeps: index === segmentIndex ? rows.map(row => mapRowToSubstep(row)) : [],\r\n      })),\r\n    };\r\n  \r\n    try {\r\n      console.log(\"postData:\", postData)\r\n      await createOrUpdateForm(postData);\r\n    } catch (error) {\r\n      throw new Error(`Error saving form: ${error}`);\r\n    }\r\n  };\r\n  \r\n  const mapRowToSubstep = (row) => {\r\n    const {\r\n      id,\r\n      technical_drawing_numbering,\r\n      tools,\r\n      description,\r\n      actual_dimension,\r\n      lower_tolerance,\r\n      upper_tolerance,\r\n      sample_quantity,\r\n      example_visual_url,\r\n      row_number\r\n    } = row;\r\n    return {\r\n      ...(id && { id }),\r\n      technical_drawing_numbering,\r\n      tools,\r\n      description,\r\n      actual_dimension,\r\n      lower_tolerance,\r\n      upper_tolerance,\r\n      sample_quantity,\r\n      example_visual_url,\r\n      row_number\r\n    };\r\n  };  "],"mappings":"qhBAAA,OAASA,kBAAkB,KAAQ,WAAW,CAC9C,OAASC,QAAQ,KAAQ,wBAAwB,CAEjD,MAAO,IAAM,CAAAC,gBAAgB,CAAG,CAC5BC,UAAU,CAAE,IAAI,CAChBC,SAAS,CAAE,IAAI,CACfC,KAAK,CAAEJ,QAAQ,CAACK,GAAG,CAAC,SAACC,OAAO,CAAEC,KAAK,QAAM,CACvCC,IAAI,CAAEF,OAAO,CAACE,IAAI,CAClBC,KAAK,CAAEH,OAAO,CAACG,KAAK,CACpBC,QAAQ,CAAE,EACZ,CAAC,EAAC,CACJ,CAAC,CAED,MAAO,IAAM,CAAAC,UAAU,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,MAAM,CAAEC,MAAM,MAAAC,QAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEpB,CAAAP,MAAM,EAAE,QAAzBE,QAAQ,CAAAG,QAAA,CAAAG,IAAA,CACdP,MAAM,CAACC,QAAQ,CAACO,IAAI,CAAC,CAACJ,QAAA,CAAAE,IAAA,gBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAK,EAAA,CAAAL,QAAA,qCAAAA,QAAA,CAAAM,IAAA,MAAAZ,OAAA,gBAIzB,kBAPY,CAAAL,UAAUA,CAAAkB,EAAA,CAAAC,GAAA,SAAAlB,IAAA,CAAAmB,KAAA,MAAAC,SAAA,OAOtB,CAED,MAAO,IAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIC,IAAI,CAAEC,OAAO,QAAK,UAAAC,CAAC,CAAI,CACtDD,OAAO,CAAAE,aAAA,CAAAA,aAAA,IAAMH,IAAI,KAAAI,eAAA,IAAGF,CAAC,CAACG,MAAM,CAAC/B,IAAI,CAAG4B,CAAC,CAACG,MAAM,CAACC,KAAK,GAAG,CACvD,CAAC,GAED,MAAO,IAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIL,CAAC,CAAK,CACnCA,CAAC,CAACM,cAAc,EAAE,CACpB,CAAC,CAED,MAAO,IAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIT,IAAI,CAAEU,IAAI,CAAEC,YAAY,qBAAAhC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAK,SAAA+B,SAAA,MAAAC,QAAA,QAAAjC,mBAAA,GAAAM,IAAA,UAAA4B,UAAAC,SAAA,iBAAAA,SAAA,CAAA1B,IAAA,CAAA0B,SAAA,CAAAzB,IAAA,SACpD0B,OAAO,CAACC,GAAG,CAAC,OAAO,CAACP,IAAI,CAAC,CACzBM,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEN,YAAY,CAAC,CACnCE,QAAQ,CAAAV,aAAA,CAAAA,aAAA,IACRH,IAAI,CAACkB,EAAE,EAAI,CAAEA,EAAE,CAAElB,IAAI,CAACkB,EAAG,CAAC,MAC9BA,EAAE,CAAElB,IAAI,CAACkB,EAAE,CACXlD,UAAU,CAAEgC,IAAI,CAAChC,UAAU,CAC3BC,SAAS,CAAE+B,IAAI,CAAC/B,SAAS,CACzBC,KAAK,CAAEJ,QAAQ,CAACK,GAAG,CAAC,SAACC,OAAO,CAAEC,KAAK,QAAM,CACvCC,IAAI,CAAEF,OAAO,CAACE,IAAI,CAClBC,KAAK,CAAEH,OAAO,CAACG,KAAK,CACpBC,QAAQ,CAAEH,KAAK,GAAKsC,YAAY,CAAGD,IAAI,CAACvC,GAAG,CAAC,SAAAgD,GAAG,QAAI,CAAAC,eAAe,CAACD,GAAG,CAAC,GAAC,CAAG,EAC7E,CAAC,EAAC,CAAC,GAAAJ,SAAA,CAAA1B,IAAA,GAIH2B,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEJ,QAAQ,CAAC,CAAAE,SAAA,CAAAzB,IAAA,SAC5B,CAAAzB,kBAAkB,CAACgD,QAAQ,CAAC,QAAAE,SAAA,CAAAzB,IAAA,iBAAAyB,SAAA,CAAA1B,IAAA,GAAA0B,SAAA,CAAAtB,EAAA,CAAAsB,SAAA,kBAE5B,IAAI,CAAAM,KAAK,uBAAAC,MAAA,CAAAP,SAAA,CAAAtB,EAAA,EAA+B,0BAAAsB,SAAA,CAAArB,IAAA,MAAAkB,QAAA,gBAEjD,KAED,GAAM,CAAAQ,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAID,GAAG,CAAK,CAC/B,GACE,CAAAD,EAAE,CAUAC,GAAG,CAVLD,EAAE,CACFK,2BAA2B,CASzBJ,GAAG,CATLI,2BAA2B,CAC3BC,KAAK,CAQHL,GAAG,CARLK,KAAK,CACLC,WAAW,CAOTN,GAAG,CAPLM,WAAW,CACXC,gBAAgB,CAMdP,GAAG,CANLO,gBAAgB,CAChBC,eAAe,CAKbR,GAAG,CALLQ,eAAe,CACfC,eAAe,CAIbT,GAAG,CAJLS,eAAe,CACfC,eAAe,CAGbV,GAAG,CAHLU,eAAe,CACfC,kBAAkB,CAEhBX,GAAG,CAFLW,kBAAkB,CAClBC,UAAU,CACRZ,GAAG,CADLY,UAAU,CAEZ,OAAA5B,aAAA,CAAAA,aAAA,IACMe,EAAE,EAAI,CAAEA,EAAE,CAAFA,EAAG,CAAC,MAChBK,2BAA2B,CAA3BA,2BAA2B,CAC3BC,KAAK,CAALA,KAAK,CACLC,WAAW,CAAXA,WAAW,CACXC,gBAAgB,CAAhBA,gBAAgB,CAChBC,eAAe,CAAfA,eAAe,CACfC,eAAe,CAAfA,eAAe,CACfC,eAAe,CAAfA,eAAe,CACfC,kBAAkB,CAAlBA,kBAAkB,CAClBC,UAAU,CAAVA,UAAU,GAEd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}