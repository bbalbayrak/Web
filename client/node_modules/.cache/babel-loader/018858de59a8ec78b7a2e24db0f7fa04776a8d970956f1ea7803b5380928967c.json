{"ast":null,"code":"import _slicedToArray from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';export var useAuth=function useAuth(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var navigate=useNavigate();var handleSubmit=function handleSubmit(event){event.preventDefault();axios.post('https://portal-test.yenaengineering.nl/api/login',{email:email,password:password}).then(function(response){setMessage(response.data.msg);if(response.status===200){localStorage.setItem('token',response.data.token);navigate('/home');window.location.reload();}}).catch(function(error){setPassword(\"\");if(error.response){setMessage(error.response.data.msg);}});};return{email:email,setEmail:setEmail,password:password,setPassword:setPassword,message:message,handleSubmit:handleSubmit};};export function logout(){// localStorage'daki token'ı temizle\nlocalStorage.removeItem('token');// kullanıcıyı login sayfasına yönlendir\nwindow.location='/landing-page';}export function isLoggedIn(){return localStorage.getItem('token')?true:false;}","map":{"version":3,"names":["useState","axios","useNavigate","useAuth","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","message","setMessage","navigate","handleSubmit","event","preventDefault","post","then","response","data","msg","status","localStorage","setItem","token","window","location","reload","catch","error","logout","removeItem","isLoggedIn","getItem"],"sources":["C:/Users/AlperenAlihanEr/portal-test/client/src/components/Login/useAuth.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport const useAuth = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [message, setMessage] = useState(null);\r\n  let navigate = useNavigate();\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    axios\r\n      .post('https://portal-test.yenaengineering.nl/api/login', { email, password })\r\n      .then((response) => {\r\n        setMessage(response.data.msg);\r\n        if (response.status === 200) {\r\n          localStorage.setItem('token', response.data.token);\r\n          navigate('/home');\r\n          window.location.reload();\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setPassword(\"\");\r\n        if (error.response) {\r\n          setMessage(error.response.data.msg);\r\n        }\r\n      });\r\n  };\r\n\r\n  return {\r\n    email,\r\n    setEmail,\r\n    password,\r\n    setPassword,\r\n    message,\r\n    handleSubmit\r\n  };\r\n};\r\n\r\nexport function logout() {\r\n  // localStorage'daki token'ı temizle\r\n  localStorage.removeItem('token');\r\n  \r\n  // kullanıcıyı login sayfasına yönlendir\r\n  window.location = '/landing-page';\r\n}\r\n\r\nexport function isLoggedIn() {\r\n  return localStorage.getItem('token') ? true : false;\r\n}\r\n"],"mappings":"iIAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,MAAO,IAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CAC3B,IAAAC,SAAA,CAA0BJ,QAAQ,CAAC,EAAE,CAAC,CAAAK,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAAgCT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAA8Bb,QAAQ,CAAC,IAAI,CAAC,CAAAc,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,GAAI,CAAAG,QAAQ,CAAGf,WAAW,EAAE,CAE5B,GAAM,CAAAgB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAK,CAAK,CAC9BA,KAAK,CAACC,cAAc,EAAE,CAEtBnB,KAAK,CACFoB,IAAI,CAAC,kDAAkD,CAAE,CAAEd,KAAK,CAALA,KAAK,CAAEI,QAAQ,CAARA,QAAS,CAAC,CAAC,CAC7EW,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClBP,UAAU,CAACO,QAAQ,CAACC,IAAI,CAACC,GAAG,CAAC,CAC7B,GAAIF,QAAQ,CAACG,MAAM,GAAK,GAAG,CAAE,CAC3BC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEL,QAAQ,CAACC,IAAI,CAACK,KAAK,CAAC,CAClDZ,QAAQ,CAAC,OAAO,CAAC,CACjBa,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAC1B,CACF,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,KAAK,CAAK,CAChBtB,WAAW,CAAC,EAAE,CAAC,CACf,GAAIsB,KAAK,CAACX,QAAQ,CAAE,CAClBP,UAAU,CAACkB,KAAK,CAACX,QAAQ,CAACC,IAAI,CAACC,GAAG,CAAC,CACrC,CACF,CAAC,CAAC,CACN,CAAC,CAED,MAAO,CACLlB,KAAK,CAALA,KAAK,CACLC,QAAQ,CAARA,QAAQ,CACRG,QAAQ,CAARA,QAAQ,CACRC,WAAW,CAAXA,WAAW,CACXG,OAAO,CAAPA,OAAO,CACPG,YAAY,CAAZA,YACF,CAAC,CACH,CAAC,CAED,MAAO,SAAS,CAAAiB,MAAMA,CAAA,CAAG,CACvB;AACAR,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC,CAEhC;AACAN,MAAM,CAACC,QAAQ,CAAG,eAAe,CACnC,CAEA,MAAO,SAAS,CAAAM,UAAUA,CAAA,CAAG,CAC3B,MAAO,CAAAV,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC,CAAG,IAAI,CAAG,KAAK,CACrD"},"metadata":{},"sourceType":"module","externalDependencies":[]}