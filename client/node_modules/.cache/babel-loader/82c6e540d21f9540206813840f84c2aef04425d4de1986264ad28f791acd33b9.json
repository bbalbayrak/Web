{"ast":null,"code":"import _slicedToArray from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import'./Login.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setShowMenu=_ref.setShowMenu;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var navigate=useNavigate();useEffect(function(){setShowMenu(false);return function(){setShowMenu(true);};},[setShowMenu]);var handleSubmit=function handleSubmit(event){event.preventDefault();axios.post('/api/login',{email:email,password:password}).then(function(response){setMessage(response.data.msg);if(response.status===200){console.log(response.status);localStorage.setItem('token',response.data.token);navigate('/home');window.location.reload();// Sayfayı yeniden yükle\n}else{console.log('Giriş başarısız');}}).catch(function(error){console.log(error);setPassword(\"\");if(error.response){setMessage(error.response.data.msg);}});};return/*#__PURE__*/_jsx(\"div\",{className:\"login-background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Giri\\u015F Yap\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:message}),/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"E-posta\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u015Eifre\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Giri\\u015F Yap\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_ref","setShowMenu","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","message","setMessage","navigate","handleSubmit","event","preventDefault","post","then","response","data","msg","status","console","log","localStorage","setItem","token","window","location","reload","catch","error","className","children","onSubmit","type","placeholder","value","onChange","e","target"],"sources":["C:/Users/AlperenAlihanEr/portal-test/client/src/components/Login/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './Login.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Login = ({ setShowMenu }) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [message, setMessage] = useState(null);\r\n  let navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    setShowMenu(false);\r\n    return () => {\r\n      setShowMenu(true);\r\n    };\r\n  }, [setShowMenu]);\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    axios\r\n      .post('/api/login', { email, password })\r\n      .then((response) => {\r\n        setMessage(response.data.msg);\r\n        if (response.status === 200) {\r\n          console.log(response.status);\r\n          localStorage.setItem('token', response.data.token);\r\n          navigate('/home');\r\n          window.location.reload(); // Sayfayı yeniden yükle\r\n        } else {\r\n          console.log('Giriş başarısız');\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setPassword(\"\");\r\n        if (error.response) {\r\n          setMessage(error.response.data.msg);\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-background\">\r\n      <div className=\"login-container\">\r\n        <h2>Giriş Yap</h2>\r\n        {message && <p className=\"message\">{message}</p>}\r\n        <form className=\"login-form\" onSubmit={handleSubmit}>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"E-posta\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Şifre\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <button type=\"submit\">Giriş Yap</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}