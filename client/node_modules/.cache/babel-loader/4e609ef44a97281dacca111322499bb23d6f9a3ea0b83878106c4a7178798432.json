{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import{updateImageStatusapproved,updateImageStatusrejected}from'./ImagePopupApi';import'./ImagePopup.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ImagePopup(_ref){var onClose=_ref.onClose,imageList=_ref.imageList;var popupContentRef=useRef(null);var _useState=useState(imageList),_useState2=_slicedToArray(_useState,2),images=_useState2[0],setImages=_useState2[1];useEffect(function(){function handleClickOutside(event){if(popupContentRef.current&&!popupContentRef.current.contains(event.target)){onClose();}}document.addEventListener('mousedown',handleClickOutside);return function(){document.removeEventListener('mousedown',handleClickOutside);};},[onClose]);var handleApproval=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(imageId){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return updateImageStatusapproved(imageId);case 3:response=_context.sent;if(response){setImages(images.map(function(img){return img.id===imageId?_objectSpread(_objectSpread({},img),{},{status:'approved'}):img;}));}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('Error updating image status:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function handleApproval(_x){return _ref2.apply(this,arguments);};}();var handleRejection=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(imageId){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return updateImageStatusrejected(imageId);case 3:response=_context2.sent;if(response){setImages(images.map(function(img){return img.id===imageId?_objectSpread(_objectSpread({},img),{},{status:'rejected'}):img;}));}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error('Error updating image status:',_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function handleRejection(_x2){return _ref3.apply(this,arguments);};}();var getImageStatusClass=function getImageStatusClass(status){switch(status){case'approved':return'status-approved';case'rejected':return'status-rejected';default:return'status-unknown';}};return/*#__PURE__*/_jsx(\"div\",{className:\"image-popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",ref:popupContentRef,children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:images.map(function(image,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"image-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:image.url,alt:\"Resim \".concat(index),className:\"popup-image \".concat(getImageStatusClass(image.status))}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-approve\",onClick:function onClick(){return handleApproval(image.id);},children:\"Onayla\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-reject\",onClick:function onClick(){return handleRejection(image.id);},children:\"Reddet\"})]})]},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"close-button-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"popup-close\",onClick:onClose,children:\"Kapat\"})})]})});}","map":{"version":3,"names":["React","useState","useRef","useEffect","updateImageStatusapproved","updateImageStatusrejected","jsx","_jsx","jsxs","_jsxs","ImagePopup","_ref","onClose","imageList","popupContentRef","_useState","_useState2","_slicedToArray","images","setImages","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleApproval","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","imageId","response","wrap","_callee$","_context","prev","next","sent","map","img","id","_objectSpread","status","t0","console","error","stop","_x","apply","arguments","handleRejection","_ref3","_callee2","_callee2$","_context2","_x2","getImageStatusClass","className","children","ref","image","index","src","url","alt","concat","onClick"],"sources":["C:/Users/AlperenAlihanEr/portal-test/client/src/components/shared/Popup/ImagePopup.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { updateImageStatusapproved, updateImageStatusrejected } from './ImagePopupApi';\r\nimport './ImagePopup.css';\r\n\r\nexport default function ImagePopup({ onClose, imageList }) {\r\n  const popupContentRef = useRef(null);\r\n  const [images, setImages] = useState(imageList);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (popupContentRef.current && !popupContentRef.current.contains(event.target)) {\r\n        onClose();\r\n      }\r\n    }\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [onClose]);\r\n\r\n  const handleApproval = async (imageId) => {\r\n    try {\r\n      const response = await updateImageStatusapproved(imageId);\r\n      if (response) {\r\n        setImages(images.map(img => img.id === imageId ? {...img, status: 'approved'} : img));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating image status:', error);\r\n    }\r\n  };\r\n\r\n  const handleRejection = async (imageId) => {\r\n    try {\r\n      const response = await updateImageStatusrejected(imageId);\r\n      if (response) {\r\n        setImages(images.map(img => img.id === imageId ? {...img, status: 'rejected'} : img));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating image status:', error);\r\n    }\r\n  };\r\n\r\n  const getImageStatusClass = (status) => {\r\n    switch(status) {\r\n      case 'approved':\r\n        return 'status-approved';\r\n      case 'rejected':\r\n        return 'status-rejected';\r\n      default:\r\n        return 'status-unknown';\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"image-popup\">\r\n      <div className=\"popup-content\" ref={popupContentRef}>\r\n        <div className=\"image-container\">\r\n        {images.map((image, index) => (\r\n            <div key={index} className=\"image-item\">\r\n              <img src={image.url} alt={`Resim ${index}`} className={`popup-image ${getImageStatusClass(image.status)}`} />\r\n              <div className=\"image-controls\">\r\n                <button className=\"btn btn-approve\" onClick={() => handleApproval(image.id)}>Onayla</button>\r\n                <button className=\"btn btn-reject\" onClick={() => handleRejection(image.id)}>Reddet</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"close-button-container\">\r\n          <button className=\"popup-close\" onClick={onClose}>\r\n            Kapat\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}