{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import axios from'axios';var API_URL=process.env.REACT_APP_API_URL;export var useApi=function useApi(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),customers=_useState4[0],setCustomers=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),products=_useState6[0],setProducts=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],setSuccessMessage=_useState10[1];var fetchCustomers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(API_URL,\"/customers\"));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setCustomers(data.data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error('Error fetching customers:',_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchCustomers(){return _ref.apply(this,arguments);};}();var fetchProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$axios$get2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(API_URL,\"/products\"));case 3:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setProducts(data.data);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.error('Error fetching products:',_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function fetchProducts(){return _ref2.apply(this,arguments);};}();console.log(\"API_URL\",API_URL);console.log(process.env);var submitProduct=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(formData){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post(\"\".concat(API_URL,\"/products\"),formData,{headers:{'Content-Type':'multipart/form-data'}});case 3:_yield$axios$post=_context3.sent;data=_yield$axios$post.data;setResponse(data);setSuccessMessage('Ürün başarıyla eklendi.');setErrorMessage(null);_context3.next=10;return fetchProducts();case 10:_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);setSuccessMessage(null);setErrorMessage('Ürün eklenirken hata oluştu.');case 16:case\"end\":return _context3.stop();}},_callee3,null,[[0,12]]);}));return function submitProduct(_x){return _ref3.apply(this,arguments);};}();var getCustomerNameById=function getCustomerNameById(id){var customer=customers.find(function(customer){return customer.id===id;});return customer?customer.name:'';};return{response:response,customers:customers,products:products,errorMessage:errorMessage,successMessage:successMessage,fetchCustomers:fetchCustomers,fetchProducts:fetchProducts,submitProduct:submitProduct,getCustomerNameById:getCustomerNameById};};","map":{"version":3,"names":["useState","axios","API_URL","process","env","REACT_APP_API_URL","useApi","_useState","_useState2","_slicedToArray","response","setResponse","_useState3","_useState4","customers","setCustomers","_useState5","_useState6","products","setProducts","_useState7","_useState8","errorMessage","setErrorMessage","_useState9","_useState10","successMessage","setSuccessMessage","fetchCustomers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","concat","sent","t0","console","error","stop","apply","arguments","fetchProducts","_ref2","_callee2","_yield$axios$get2","_callee2$","_context2","log","submitProduct","_ref3","_callee3","formData","_yield$axios$post","_callee3$","_context3","post","headers","_x","getCustomerNameById","id","customer","find","name"],"sources":["C:/Users/AlperenAlihanEr/portal-test/client/src/components/FormsPage/UploadFormApi.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL;\r\n\r\nexport const useApi = () => {\r\n  const [response, setResponse] = useState(null);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n\r\n  const fetchCustomers = async () => {\r\n    try {\r\n      const { data } = await axios.get(`${API_URL}/customers`);\r\n      setCustomers(data.data);\r\n    } catch (error) {\r\n      console.error('Error fetching customers:', error);\r\n    }\r\n  };\r\n  \r\n  const fetchProducts = async () => {\r\n    try {\r\n      const { data } = await axios.get(`${API_URL}/products`);\r\n      setProducts(data.data);\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n    }\r\n  };\r\n\r\n  console.log(\"API_URL\",API_URL)\r\n  console.log(process.env);\r\n  const submitProduct = async (formData) => {\r\n    try { \r\n      const { data } = await axios.post(`${API_URL}/products`, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },   \r\n      });\r\n      setResponse(data);\r\n      setSuccessMessage('Ürün başarıyla eklendi.');\r\n      setErrorMessage(null);\r\n      await fetchProducts();\r\n    } catch (error) {\r\n      setSuccessMessage(null);\r\n      setErrorMessage('Ürün eklenirken hata oluştu.');\r\n    }\r\n  };\r\n\r\n  const getCustomerNameById = (id) => {\r\n    const customer = customers.find((customer) => customer.id === id);\r\n    return customer ? customer.name : '';\r\n  };\r\n\r\n  return {\r\n    response,\r\n    customers,\r\n    products,\r\n    errorMessage,\r\n    successMessage,\r\n    fetchCustomers,\r\n    fetchProducts,\r\n    submitProduct,\r\n    getCustomerNameById\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}