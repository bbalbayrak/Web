{"ast":null,"code":"import { createOrUpdateForm } from './formapi';\nimport { segments } from './Segments';\nexport const initialFormState = {\n  product_id: null,\n  vendor_id: null,\n  steps: segments.map((segment, index) => ({\n    name: segment.name,\n    order: segment.order,\n    substeps: []\n  }))\n};\nexport const fetchItems = async (getter, setter) => {\n  try {\n    const response = await getter();\n    setter(response.data);\n  } catch (error) {\n    // console.error(`Error fetching items: ${error}`);\n  }\n};\nexport const handleFormChange = (form, setForm) => e => {\n  setForm({\n    ...form,\n    [e.target.name]: e.target.value\n  });\n};\nexport const handleDragOver = e => {\n  e.preventDefault();\n};\nexport const saveForm = (form, rows, setFormSaved) => async function () {\n  let innerRows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : rows;\n  console.log(rows);\n  const postData = {\n    product_id: form.product_id,\n    vendor_id: form.vendor_id,\n    steps: segments.map((segment, index) => ({\n      name: segment.name,\n      order: segment.order,\n      substeps: index === 1 ? rows.map(row => {\n        const {\n          id,\n          technical_drawing_numbering,\n          tools,\n          description,\n          actual_dimension,\n          lower_tolerance,\n          upper_tolerance,\n          sample_quantity,\n          example_visual_url\n        } = row;\n        return {\n          ...(id && {\n            id\n          }),\n          technical_drawing_numbering,\n          tools,\n          description,\n          actual_dimension,\n          lower_tolerance,\n          upper_tolerance,\n          sample_quantity,\n          example_visual_url,\n          status: \"active\"\n        };\n      }) : []\n    }))\n  };\n  try {\n    await createOrUpdateForm(postData);\n    setFormSaved(true);\n  } catch (error) {\n    throw new Error(`Error saving form: ${error}`);\n  }\n};","map":{"version":3,"names":["createOrUpdateForm","segments","initialFormState","product_id","vendor_id","steps","map","segment","index","name","order","substeps","fetchItems","getter","setter","response","data","error","handleFormChange","form","setForm","e","target","value","handleDragOver","preventDefault","saveForm","rows","setFormSaved","innerRows","arguments","length","undefined","console","log","postData","row","id","technical_drawing_numbering","tools","description","actual_dimension","lower_tolerance","upper_tolerance","sample_quantity","example_visual_url","status","Error"],"sources":["C:/Users/AlperenAlihanEr/portal-test/client/src/components/ITPForms/pqc_utils.js"],"sourcesContent":["import { createOrUpdateForm } from './formapi';\r\nimport { segments } from './Segments';\r\n\r\nexport const initialFormState = {\r\n    product_id: null,\r\n    vendor_id: null,\r\n    steps: segments.map((segment, index) => ({\r\n      name: segment.name,\r\n      order: segment.order,\r\n      substeps: [],\r\n    })),\r\n  };\r\n  \r\n  export const fetchItems = async (getter, setter) => {\r\n    try {\r\n      const response = await getter();\r\n      setter(response.data);\r\n    } catch (error) {\r\n      // console.error(`Error fetching items: ${error}`);\r\n    }\r\n  };\r\n  \r\n  export const handleFormChange = (form, setForm) => e => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n  \r\n  export const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n  };\r\n  \r\n  export const saveForm = (form, rows, setFormSaved) => async (innerRows = rows) => {\r\n    console.log(rows)\r\n    const postData = {\r\n      product_id: form.product_id,\r\n      vendor_id: form.vendor_id,\r\n      steps: segments.map((segment, index) => ({\r\n        name: segment.name,\r\n        order: segment.order,\r\n        substeps: index === 1 ? rows.map(row => {\r\n          const {\r\n            id,\r\n            technical_drawing_numbering,\r\n            tools,\r\n            description,\r\n            actual_dimension,\r\n            lower_tolerance,\r\n            upper_tolerance,\r\n            sample_quantity,\r\n            example_visual_url,\r\n          } = row;\r\n          return {\r\n            ...(id && { id }),\r\n            technical_drawing_numbering,\r\n            tools,\r\n            description,\r\n            actual_dimension,\r\n            lower_tolerance,\r\n            upper_tolerance,\r\n            sample_quantity,\r\n            example_visual_url,\r\n            status: \"active\"\r\n          };\r\n        }) : [],\r\n      })),\r\n    };\r\n  \r\n    try {\r\n      await createOrUpdateForm(postData);\r\n      setFormSaved(true);\r\n    } catch (error) {\r\n      throw new Error(`Error saving form: ${error}`);\r\n    }\r\n  };\r\n  "],"mappings":"AAAA,SAASA,kBAAkB,QAAQ,WAAW;AAC9C,SAASC,QAAQ,QAAQ,YAAY;AAErC,OAAO,MAAMC,gBAAgB,GAAG;EAC5BC,UAAU,EAAE,IAAI;EAChBC,SAAS,EAAE,IAAI;EACfC,KAAK,EAAEJ,QAAQ,CAACK,GAAG,CAAC,CAACC,OAAO,EAAEC,KAAK,MAAM;IACvCC,IAAI,EAAEF,OAAO,CAACE,IAAI;IAClBC,KAAK,EAAEH,OAAO,CAACG,KAAK;IACpBC,QAAQ,EAAE;EACZ,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAOC,MAAM,EAAEC,MAAM,KAAK;EAClD,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMF,MAAM,EAAE;IAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC;EACvB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd;EAAA;AAEJ,CAAC;AAED,OAAO,MAAMC,gBAAgB,GAAGA,CAACC,IAAI,EAAEC,OAAO,KAAKC,CAAC,IAAI;EACtDD,OAAO,CAAC;IAAE,GAAGD,IAAI;IAAE,CAACE,CAAC,CAACC,MAAM,CAACb,IAAI,GAAGY,CAAC,CAACC,MAAM,CAACC;EAAM,CAAC,CAAC;AACvD,CAAC;AAED,OAAO,MAAMC,cAAc,GAAIH,CAAC,IAAK;EACnCA,CAAC,CAACI,cAAc,EAAE;AACpB,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAGA,CAACP,IAAI,EAAEQ,IAAI,EAAEC,YAAY,KAAK,kBAA4B;EAAA,IAArBC,SAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGH,IAAI;EAC3EM,OAAO,CAACC,GAAG,CAACP,IAAI,CAAC;EACjB,MAAMQ,QAAQ,GAAG;IACfhC,UAAU,EAAEgB,IAAI,CAAChB,UAAU;IAC3BC,SAAS,EAAEe,IAAI,CAACf,SAAS;IACzBC,KAAK,EAAEJ,QAAQ,CAACK,GAAG,CAAC,CAACC,OAAO,EAAEC,KAAK,MAAM;MACvCC,IAAI,EAAEF,OAAO,CAACE,IAAI;MAClBC,KAAK,EAAEH,OAAO,CAACG,KAAK;MACpBC,QAAQ,EAAEH,KAAK,KAAK,CAAC,GAAGmB,IAAI,CAACrB,GAAG,CAAC8B,GAAG,IAAI;QACtC,MAAM;UACJC,EAAE;UACFC,2BAA2B;UAC3BC,KAAK;UACLC,WAAW;UACXC,gBAAgB;UAChBC,eAAe;UACfC,eAAe;UACfC,eAAe;UACfC;QACF,CAAC,GAAGT,GAAG;QACP,OAAO;UACL,IAAIC,EAAE,IAAI;YAAEA;UAAG,CAAC,CAAC;UACjBC,2BAA2B;UAC3BC,KAAK;UACLC,WAAW;UACXC,gBAAgB;UAChBC,eAAe;UACfC,eAAe;UACfC,eAAe;UACfC,kBAAkB;UAClBC,MAAM,EAAE;QACV,CAAC;MACH,CAAC,CAAC,GAAG;IACP,CAAC,CAAC;EACJ,CAAC;EAED,IAAI;IACF,MAAM9C,kBAAkB,CAACmC,QAAQ,CAAC;IAClCP,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC,CAAC,OAAOX,KAAK,EAAE;IACd,MAAM,IAAI8B,KAAK,CAAE,sBAAqB9B,KAAM,EAAC,CAAC;EAChD;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}