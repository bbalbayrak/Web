{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AlperenAlihanEr/portal-test/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{getFormById}from'./formapi';import{segments}from'./renderSegmentContent';import{renderSegmentContent}from'./renderSegmentContent';import{initialFormState,fetchItems,handleFormChange,saveForm,handleDragOver}from'./pqc_utils';import{addRow,handleInputChange,handleDrop,handleFileSelect}from'./rowDetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormEdit=function FormEdit(){var _form$product,_form$vendor;var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),activeSegment=_useState4[0],setActiveSegment=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),formSaved=_useState6[0],setFormSaved=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),rows=_useState8[0],setRows=_useState8[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getFormById(id);case 3:formData=_context.sent;setForm(formData);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[id]);useEffect(function(){if(formSaved){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var formData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getFormById(id);case 3:formData=_context2.sent;setForm(formData);setFormSaved(false);_context2.next=10;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();}},[formSaved,id]);useEffect(function(){if(form){var finalPartMeasurementStep=form.steps.find(function(step){return step.name==='Final Part Measurement';});if(finalPartMeasurementStep){setRows(finalPartMeasurementStep.substeps);}}},[form]);var handleSegmentClick=function handleSegmentClick(order){setActiveSegment(order);};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-edit-main\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"ITP Formu\"}),form?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Product Name: \",form.product_name||((_form$product=form.product)===null||_form$product===void 0?void 0:_form$product.name)]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Vendor Name: \",form.vendor_name||((_form$vendor=form.vendor)===null||_form$vendor===void 0?void 0:_form$vendor.name)]}),/*#__PURE__*/_jsx(\"div\",{className:\"segments\",children:segments.map(function(segment){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSegmentClick(segment.order);},className:activeSegment===segment.order?'active':'',children:segment.name},segment.order);})}),/*#__PURE__*/_jsx(\"div\",{className:\"segment-content\",children:renderSegmentContent({activeSegment:activeSegment,form:form,rows:rows,handleInputChange:handleInputChange(rows,setRows),handleDragOver:handleDragOver,handleDrop:handleDrop(rows,setRows),handleFileSelect:handleFileSelect(rows,setRows),addRow:addRow(rows,setRows),saveForm:saveForm(form,rows)})})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Form y\\xFCkleniyor...\"})]});};export default FormEdit;","map":{"version":3,"names":["React","useState","useEffect","useParams","getFormById","segments","renderSegmentContent","initialFormState","fetchItems","handleFormChange","saveForm","handleDragOver","addRow","handleInputChange","handleDrop","handleFileSelect","jsx","_jsx","jsxs","_jsxs","FormEdit","_form$product","_form$vendor","_useParams","id","_useState","_useState2","_slicedToArray","form","setForm","_useState3","_useState4","activeSegment","setActiveSegment","_useState5","_useState6","formSaved","setFormSaved","_useState7","_useState8","rows","setRows","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","wrap","_callee$","_context","prev","next","sent","t0","stop","apply","arguments","_ref2","_callee2","_callee2$","_context2","finalPartMeasurementStep","steps","find","step","name","substeps","handleSegmentClick","order","className","children","product_name","product","vendor_name","vendor","map","segment","onClick"],"sources":["C:/Users/AlperenAlihanEr/portal-test/client/src/components/PQC/editForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getFormById } from './formapi';\r\nimport { segments } from './renderSegmentContent';\r\nimport { renderSegmentContent } from './renderSegmentContent';\r\nimport { initialFormState, fetchItems, handleFormChange, saveForm, handleDragOver } from './pqc_utils';\r\nimport { addRow, handleInputChange, handleDrop, handleFileSelect } from './rowDetail';\r\n\r\nconst FormEdit = () => {\r\n  const { id } = useParams();\r\n  const [form, setForm] = useState(null);\r\n  const [activeSegment, setActiveSegment] = useState(1);\r\n  const [formSaved, setFormSaved] = useState(false);\r\n  const [rows, setRows] = useState([]);\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const formData = await getFormById(id);\r\n        setForm(formData);\r\n      } catch (error) {\r\n        // console.error('Error fetching form:', error);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [id]);\r\n  \r\n  useEffect(() => {\r\n    if (formSaved) {\r\n      const fetchData = async () => {\r\n        try {\r\n          const formData = await getFormById(id);\r\n          setForm(formData);\r\n          setFormSaved(false);\r\n        } catch (error) {\r\n          \r\n        }\r\n      };\r\n      fetchData();\r\n    }\r\n  }, [formSaved, id]);\r\n  useEffect(() => {\r\n    if (form) {\r\n      const finalPartMeasurementStep = form.steps.find(\r\n        (step) => step.name === 'Final Part Measurement'\r\n      );\r\n      if (finalPartMeasurementStep) {\r\n        setRows(finalPartMeasurementStep.substeps);\r\n      }\r\n    }\r\n  }, [form]);\r\n\r\n  const handleSegmentClick = (order) => {\r\n    setActiveSegment(order);\r\n  };\r\n\r\n  return (\r\n    <div className='form-edit-main'>\r\n      <h1>ITP Formu</h1>\r\n      {form ? (\r\n        <div>\r\n          <h2>Product Name: {form.product_name || form.product?.name}</h2>\r\n          <h2>Vendor Name: {form.vendor_name || form.vendor?.name}</h2>\r\n            <div className=\"segments\">\r\n                {segments.map((segment) => (\r\n                <button key={segment.order} onClick={() => handleSegmentClick(segment.order)} className={activeSegment === segment.order ? 'active' : ''} >\r\n                    {segment.name}\r\n                </button>\r\n                ))}\r\n            </div>\r\n            <div className=\"segment-content\">\r\n              {renderSegmentContent({\r\n                activeSegment,\r\n                form,\r\n                rows,\r\n                handleInputChange: handleInputChange(rows, setRows),\r\n                handleDragOver,\r\n                handleDrop: handleDrop(rows, setRows),\r\n                handleFileSelect: handleFileSelect(rows, setRows),\r\n                addRow: addRow(rows, setRows),\r\n                saveForm: saveForm(form, rows),\r\n              })}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <p>Form y√ºkleniyor...</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default FormEdit;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}